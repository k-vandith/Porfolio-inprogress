import{r as e,x as A,j as d,y as E,z}from"./vendor-CJd0nM7R.js";const F=[],L={width:"100%",height:"100%"},M=e.forwardRef(function({className:f,children:v,debounceTime:m=300,ignoreDimensions:s=F,parentSizeStyles:x,enableDebounceLeadingCall:p=!0,resizeObserverPolyfill:b,...R},g){const c=e.useRef(null),w=e.useRef(0),[h,D]=e.useState({width:0,height:0,top:0,left:0}),l=e.useMemo(()=>{const a=Array.isArray(s)?s:[s];return A(r=>{D(t=>Object.keys(t).filter(n=>t[n]!==r[n]).every(n=>a.includes(n))?t:r)},m,{leading:p})},[m,p,s]);return e.useEffect(()=>{const a=b||window.ResizeObserver,r=new a(t=>{t.forEach(n=>{const{left:y,top:S,width:j,height:o}=(n==null?void 0:n.contentRect)??{};w.current=window.requestAnimationFrame(()=>{l({width:j,height:o,top:S,left:y})})})});return c.current&&r.observe(c.current),()=>{window.cancelAnimationFrame(w.current),r.disconnect(),l.cancel()}},[l,b]),d.jsx("div",{style:{...L,...x},ref:E([g,c]),className:f,...R,children:v({...h,ref:c.current,resize:l})})}),U=e.forwardRef(({scene:f,style:v,onSplineMouseDown:m,onSplineMouseUp:s,onSplineMouseHover:x,onSplineKeyDown:p,onSplineKeyUp:b,onSplineStart:R,onSplineLookAt:g,onSplineFollow:c,onSplineScroll:w,onLoad:h,renderOnDemand:D=!0,children:l,...a},r)=>{const t=e.useRef(null),[n,y]=e.useState(!0),[S,j]=e.useState();if(S)throw S;return e.useEffect(()=>{y(!0);let o;const k=[{name:"mouseDown",cb:m},{name:"mouseUp",cb:s},{name:"mouseHover",cb:x},{name:"keyDown",cb:p},{name:"keyUp",cb:b},{name:"start",cb:R},{name:"lookAt",cb:g},{name:"follow",cb:c},{name:"scroll",cb:w}];if(t.current){o=new z(t.current,{renderOnDemand:D});async function i(){await o.load(f);for(let u of k)u.cb&&o.addEventListener(u.name,u.cb);y(!1),h==null||h(o)}i().catch(u=>{j(u)})}return()=>{for(let i of k)i.cb&&o.removeEventListener(i.name,i.cb);o.dispose()}},[f]),d.jsx(M,{ref:r,parentSizeStyles:{overflow:"hidden",...v},debounceTime:50,...a,children:()=>d.jsxs(d.Fragment,{children:[n&&l,d.jsx("canvas",{ref:t,style:{display:n?"none":"block"}})]})})});export{U as C};
